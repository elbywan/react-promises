!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e["react-promises"]={},e.React)}(this,function(e,i){"use strict";var s="default"in i?i.default:i;function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return o}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}var d=function(e){function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=f(this,p(o).call(this,e))).state={pending:null,error:null,result:null,skipped:null},t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,i.Component),t=o,(n=[{key:"componentDidMount",value:function(){this.onInitAndUpdate()}},{key:"componentWillUnmount",value:function(){this.__unmounted=!0}},{key:"setState",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.__unmounted||(e=h(p(o.prototype),"setState",this)).call.apply(e,[this].concat(n))}},{key:"componentDidUpdate",value:function(e,t){e!==this.props&&this.onInitAndUpdate()}},{key:"onInitAndUpdate",value:function(){if(!this.props.promise)throw new Error("Promise function is missing.");!this.props.skip||"function"==typeof this.props.skip&&!this.props.skip(this.props)?this.executePromise():this.setState({pending:!1,skipped:!0})}},{key:"executePromise",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._backedOptions||this.props,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=n.mixin,o=void 0!==r&&r,i=n.replayed,u=void 0!==i&&i,s=this.props,c=s.promise,p=s.then;this.setState({pending:!0,skipped:!1}),this._backedOptions=o?a({},e,this._backedOptions):e,c(e,{replayed:u}).then(function(e){return"function"==typeof p&&(e=p(e)),t.setState({result:e,error:null}),e}).catch(function(e){t.setState({error:e,result:null})}).then(function(){t.setState({pending:!1})})}},{key:"render",value:function(){var n=this,e=this.state.pending,t=this.props.render;return null===e?null:t(a({},this.state,{replay:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return n.executePromise.bind(n)(e,{mixin:t,replayed:!0})}}))}}])&&u(t.prototype,n),r&&u(t,r),o}();e.Promise=d,e.withPromise=function(e){var t=e.skip,o=e.promise,i=e.then,n=e.props,u=void 0===n?function(e){return e}:n;return function(r){return function(n){return s.createElement(d,c({skip:t,promise:o,render:function(e){var t=a({},n,u(e,n));return s.createElement(r,t)},then:i},n))}}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=react-promises.umd.min.js.map
